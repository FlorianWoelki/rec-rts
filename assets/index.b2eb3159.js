!function(){const A=document.createElement("link").relList;if(!(A&&A.supports&&A.supports("modulepreload"))){for(const A of document.querySelectorAll('link[rel="modulepreload"]'))e(A);new MutationObserver((A=>{for(const o of A)if("childList"===o.type)for(const A of o.addedNodes)"LINK"===A.tagName&&"modulepreload"===A.rel&&e(A)})).observe(document,{childList:!0,subtree:!0})}function e(A){if(A.ep)return;A.ep=!0;const e=function(A){const e={};return A.integrity&&(e.integrity=A.integrity),A.referrerpolicy&&(e.referrerPolicy=A.referrerpolicy),"use-credentials"===A.crossorigin?e.credentials="include":"anonymous"===A.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(A);fetch(A.href,e)}}();let A=!1;window.onload=()=>{A=!0,m()},window.onresize=m;let e=!1,o=!1,t=0,n=0,r=0,i=0;var a,l,c=3,f=(a="data:image/png;base64,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",l=new Image,d++,l.onload=function(){0==--d&&m()},l.src=a,l),d=0,g=new Array(6);for(let b=0;b<g.length;b++)g[b]={name:"Base",imageX:0,imageY:6};var w=new Array(1024);for(let b=0;b<32;b++)for(let A=0;A<32;A++)w[A+32*b]={color:16711935,visible:!1,owned:!1,land:2-Math.floor(Math.random()*Math.random()*3)};const s=[];function m(){if(!A||d>0)return;const a=document.querySelector("#map");a.width=window.innerWidth,a.height=window.innerHeight,window.onkeydown=function(A){s[A.keyCode]=!0},window.onkeyup=function(A){s[A.keyCode]=!1},a.onmousedown=function(A){A.preventDefault(),e=!0,o=!1,t=A.clientX,n=A.clientY},a.onclick=function(A){if(e=!1,!o){const e=document.querySelector("#map");var t=Math.floor(r+(e.width/c-512)/2),n=Math.floor(i+(e.height/c-512)/2);!function(A,e){if(A>0&&e>0&&A<32&&e<32){var o=C(A,e);o.owned=!o.owned,function(){for(var A=0;A<32;A++)for(var e=0;e<32;e++)w[e+32*A].visible&=1;for(A=0;A<32;A++)for(e=0;e<32;e++)w[e+32*A].owned&&h(e,A,4)}()}u=A,v=e,console.log(u,v),B()}(Math.floor((A.clientX/c-t)/16),Math.floor((A.clientY/c-n)/16))}},window.onmousemove=function(A){if(e){A.preventDefault();var a=A.clientX-t,l=A.clientY-n;(o||a*a+l*l>64)&&(o=!0,r+=a/c,i+=l/c,t=A.clientX,n=A.clientY,B())}},D(),B()}let u=0,v=0;function h(A,e,o){for(var t=e-o;t<=e+o;t++)if(!(t<0||t>=32))for(var n=A-o;n<=A+o;n++)if(!(n<0||n>=32)){var r=n-A,i=t-e;if(r*r+i*i<=o*o+2){if(0===t||0===n||31===n||31===t)continue;w[n+32*t].visible=3}}}function D(){requestAnimationFrame(D)}function B(){const A=document.querySelector("#map");c=Math.max(Math.floor(A.height/300+1),Math.floor(A.width/(16/9*300)+1));var e=Math.max(0,576-A.width/c)/2,o=Math.max(0,576-A.height/c)/2;r<-e&&(r=-e),i<-o&&(i=-o),r>e&&(r=e),i>o&&(i=o);const t=A.getContext("2d");t.imageSmoothingEnabled=!1,t.setTransform(c,0,0,c,0,0);for(var n=Math.floor(r+(A.width/c-512)/2),a=Math.floor(i+(A.height/c-512)/2),l=Math.floor(-n/16),d=Math.floor(-a/16),w=Math.ceil((-n+A.width/c)/16),s=Math.ceil((-a+A.height/c)/16),m=d;m<s;m++)for(var u=l;u<w;u++){if(0==(P=C(u,m)).land)t.drawImage(f,40,0,8,8,16*u+n+0,16*m+a+0,8,8),t.drawImage(f,40,0,8,8,16*u+n+8,16*m+a+0,8,8),t.drawImage(f,40,0,8,8,16*u+n+0,16*m+a+8,8,8),t.drawImage(f,40,0,8,8,16*u+n+8,16*m+a+8,8,8);else for(var v=0;v<4;v++){var h=v%2*2-1,D=C(u,m+(y=2*(v>>1)-1)).land!==P.land,B=C(u+h,m).land!==P.land,p=C(u+h,m+y).land!==P.land,b=1,X=1+3*(P.land-1);D&&(X+=y),B&&(b+=h),D||B||!p||(b+=3-v%2,X-=v>>1),t.drawImage(f,8*b,8*X,8,8,16*u+n+v%2*8,16*m+a+8*(v>>1),8,8)}P.owned&&t.drawImage(f,0,48,16,16,16*u+n,16*m+a,16,16)}for(m=d;m<s;m++)for(u=l;u<w;u++){var P;if(1==(P=C(u,m)).visible)t.drawImage(f,240,16,8,8,16*u+n+0,16*m+a+0,8,8),t.drawImage(f,240,16,8,8,16*u+n+8,16*m+a+0,8,8),t.drawImage(f,240,16,8,8,16*u+n+0,16*m+a+8,8,8),t.drawImage(f,240,16,8,8,16*u+n+8,16*m+a+8,8,8);else for(v=0;v<4;v++){var y;h=v%2*2-1,D=C(u,m+(y=2*(v>>1)-1)).visible!==P.visible,B=C(u+h,m).visible!==P.visible,p=C(u+h,m+y).visible!==P.visible,b=28,X=1;3==P.visible&&(X+=3),D&&(X+=y),B&&(b+=h),D||B||!p||(b+=3-v%2,X-=v>>1),t.drawImage(f,8*b,8*X,8,8,16*u+n+v%2*8,16*m+a+8*(v>>1),8,8)}}k("GOLD: 500",4,4),k("FOOD: 0/100",4,14),function(){const A=document.querySelector("#map").getContext("2d");A.beginPath(),A.fillStyle="rgba(255, 255, 255, 0.3)",A.fillRect(0,30,24,24*g.length+6),A.stroke()}();for(v=0;v<g.length;v++)k(g[v].name,6,34+24*v,3),L(g[v].imageX,g[v].imageY,4,38+24*v)}function C(A,e){return A<0||e<0||A>=32||e>=32?w[0]:w[A+32*e]}var p="ABCDEFGHIJKLMNOPQRSTUVWXYZ      0123456789.,!?'\":;()+-=*/\\%     ";function k(A,e,o,t=8){A=A.toUpperCase();const n=document.querySelector("#map").getContext("2d");for(var r=0;r<A.length;r++){var i=p.indexOf(A.charAt(r)),a=0+i%32,l=29+(i>>5);n.drawImage(f,8*a,8*l,8,8,e+r*t,o,t,t)}}function L(A,e,o,t){const n=document.querySelector("#map").getContext("2d");n.beginPath(),n.strokeStyle="yellow",n.rect(o,t,16,16),n.stroke(),n.drawImage(f,8*A,8*e,16,16,o,t,16,16)}

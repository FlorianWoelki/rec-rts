var A=Object.defineProperty,e=("undefined"!=typeof require&&require,(e,o,t)=>(((e,o,t)=>{o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t})(e,"symbol"!=typeof o?o+"":o,t),t));!function(){const A=document.createElement("link").relList;if(!(A&&A.supports&&A.supports("modulepreload"))){for(const A of document.querySelectorAll('link[rel="modulepreload"]'))e(A);new MutationObserver((A=>{for(const o of A)if("childList"===o.type)for(const A of o.addedNodes)"LINK"===A.tagName&&"modulepreload"===A.rel&&e(A)})).observe(document,{childList:!0,subtree:!0})}function e(A){if(A.ep)return;A.ep=!0;const e=function(A){const e={};return A.integrity&&(e.integrity=A.integrity),A.referrerpolicy&&(e.referrerPolicy=A.referrerpolicy),"use-credentials"===A.crossorigin?e.credentials="include":"anonymous"===A.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(A);fetch(A.href,e)}}();let o=!1;window.onload=()=>{o=!0,u()},window.onresize=u;let t=!1,r=!1,n=0,i=0,a=0,l=0;var c,s,d=3,f=(c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAGcUlEQVR42u3dMZLjRBQAUF+FgHCJuATX4ABUkVO1GQcg4gokJFyAA2xGBgcg3TmBwUW5sDWS1eru3y2p36tSwU577Rnb/+ur/x/v5dOv314jj69//qvoWLv/j5ePjoLjQrRr4X/XblN2LAXWLz9983RsXW+ZAK6X67/H59vx+b////+w/npdfO4+CVxDk8BSYH/x4x9PxzTgl9b7JYD7m3wpAKzPrYvNrsE/PV6tx1cAc4G99ZgmgTYJ4O3dG/v+Neuv18Vn8yRQ46hfAUyD/zEIl4J96TZ//v5DhwTw9vDGfpsJAOtz62LzcMF/DakA7gmgNGD7JoC3p7Pb+wCwPl0XnyqAasE/lwT6XALMBYD1uXWxqQLolgBSbpO/B3BduQa2LgE0TQLXXSaBewKoFfypwX1LEinJR6/eHIAK4KQJYGlDcZoA9PHNAagAGmwC1g7+tfJ+LfifE4A+vjkAFUBoG7B1Akg59PHNAUgCJ60AtiUAfXxzAIJ/4ApAH98cgCRwqjZg/iWAPr45AF2AIQaB9PHNAegCNKgAotqAeu3mAAhLAJdL2ucJLGuRAPThzQG4BNhpEojeBNSHNwdA+CZgWQUQnwD04c0BCP6gNmCdCqBWEngMfr+vbw6Ag1QA9+MWwLdjLrAfj6V1v69vDoDF4F9LBqnJIqYCmEsES4G9tu739c0BkBygKUni1Xq9CqD2oQ9vDkDwh/43pgKodXz16fuiQ6/eHIAkUHiWP3oC0Mc3B3DC4F+7Xe791EkAX/723dOxdb1+AtDHNwdwmiSwn/tbCuxpIE4Dfmk9JgHo45sDEPwL91svAcwF9tZjmgTqJQB9fHMAh08C+7vfYyUAfXxzAII/pAKoEfxzSWDtdmuPq49vDoAGFUDrBHC7zX2A6NVj6+ObA1ABBOqZAO6/f7CWABzmADhZBbDtEkAf3xyACiC0Atj3JqA+vjkASWDwLoA+vjkAwW8OQB/fHIAkYA5AH98cgOA/+BxA/iWAPr45AA7fBSjbA9DHNwegC7D7BKDXbg6AgSsAfXhzAIJ04DkAfXhzAAzcBdCHNwcg+A8yBxDxgSD68OYACPswkLjPBKz1kWD68OYABH/VJNDmMwFjPxZcH94cwNBJYD8fDOrfBTAHQJfg7/+R4DXopZsDYGD67OYAOE+psvVfJ73os5sD4CQJ4O8PH5KO9wlAn90cAKdIAI9n+W0JQJ/dHACnSACPgb4tAeizmwNg0ApAn90cAANXAPrs5gAYsgJwmANg6C6APrs5AAZPAPrs5gAYNAHos5sDYPAEoM9uDoBDJ4BL9iiwPrs5AIakz24OAAlAn90cAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEmuE7cvLa1N10v//nXB/TZr66mPP72/1PtPXU/989xzP/d8brm/nq9fzt8vef56/XntOTh88O/lCV/7/mp//6mPk/J4KQko9/tfeoycn7fH65n69aO/H4dPAKX3X5oAtj5+rQSQe789KpCWAdM7AWx5jYYL/tw3YNQZLufFmTs75pRwNRLA3N9NvQSY/hyvKozSErb0EikngCITwKvnL+pEcroEcJYKoNclQGkFsJeSNur1Kk0AUXtEKa/TaYPfHkDdM1RkhdTi+S2pEKKe31qbvLW+v2ETQOkufK1d4twuRvTPV3oGi7rG3fL85Wwy1jzD5l5ClHZRUr5+2i4AMLjoDL51lzW6AonaJa5ZibXaZGvxMxztrDm3ybjlZz5UhbC1xHvx4hZt+qWWoLltvlabntHBE3GN3WKXvOcue0lA137/HTIBlOySb82YkYMZkZtIkRVA7rXw3NdL2pWlu+QRO+0127zR7/3TJ4Dc4K8xh9DyEqZXAtjrG6wkQGq0+VokiNPOCbQqEWveT+s2VM0z1V7fYCNXALWnGYdLAFvWalxTderzF78J9vwmGXUPILeiaH2J2K0L0GoSa0uZeKk4itri/nN3k19ttvbcGT/TGTK36qiVUAAAAAAAAAAAavgHmGz068Lw7KAAAAAASUVORK5CYII=",s=new Image,g++,s.onload=function(){0==--g&&u()},s.src=c,s),g=0;const w=new class{constructor(){e(this,"scrollSpeed",3),e(this,"keys",[]),window.onkeydown=A=>{this.keys[A.keyCode]=!0},window.onkeyup=A=>{this.keys[A.keyCode]=!1}}update(A){this.keys[87]&&(scrollY+=this.scrollSpeed,A()),this.keys[65]&&(scrollX+=this.scrollSpeed,A()),this.keys[83]&&(scrollY-=this.scrollSpeed,A()),this.keys[68]&&(scrollX-=this.scrollSpeed,A())}};var h=new Array(6);for(let P=0;P<h.length;P++)h[P]={name:"Base",imageX:0,imageY:6};var m=new Array(1024);for(let P=0;P<32;P++)for(let A=0;A<32;A++)m[A+32*P]={color:16711935,visible:!1,owned:!1,land:2-Math.floor(Math.random()*Math.random()*3)};function u(){if(!o||g>0)return;const A=document.querySelector("#map");A.width=window.innerWidth,A.height=window.innerHeight,A.onmousedown=function(A){A.preventDefault(),t=!0,r=!1,n=A.clientX,i=A.clientY},A.onclick=function(A){if(t=!1,!r){const t=document.querySelector("#map");var e=Math.floor(a+(t.width/d-512)/2),o=Math.floor(l+(t.height/d-512)/2);D(Math.floor((A.clientX/d-e)/16),Math.floor((A.clientY/d-o)/16))}};var e=Math.floor(a+(A.width/d-512)/2),c=Math.floor(l+(A.height/d-512)/2);D(Math.floor((800/d-e)/16),Math.floor((600/d-c)/16)),window.onmousemove=function(A){if(t){A.preventDefault();var e=A.clientX-n,o=A.clientY-i;(r||e*e+o*o>64)&&(r=!0,a+=e/d,l+=o/d,n=A.clientX,i=A.clientY,b())}},y(),b()}let v=0,p=0;function D(A,e){if(A>0&&e>0&&A<32&&e<32){var o=B(A,e);o.owned=!o.owned,function(){for(var A=0;A<32;A++)for(var e=0;e<32;e++)m[e+32*A].visible&=1;for(A=0;A<32;A++)for(e=0;e<32;e++)m[e+32*A].owned&&k(e,A,4)}()}v=A,p=e,console.log(v,p),b()}function k(A,e,o){for(var t=e-o;t<=e+o;t++)if(!(t<0||t>=32))for(var r=A-o;r<=A+o;r++)if(!(r<0||r>=32)){var n=r-A,i=t-e;if(n*n+i*i<=o*o+2){if(0===t||0===r||31===r||31===t)continue;m[r+32*t].visible=3}}}const y=()=>{requestAnimationFrame(y),w.update(b)};function b(){const A=document.querySelector("#map");d=Math.max(Math.floor(A.height/300+1),Math.floor(A.width/(16/9*300)+1));var e=Math.max(0,576-A.width/d)/2,o=Math.max(0,576-A.height/d)/2;a<-e&&(a=-e),l<-o&&(l=-o),a>e&&(a=e),l>o&&(l=o);const t=A.getContext("2d");t.imageSmoothingEnabled=!1,t.setTransform(d,0,0,d,0,0);for(var r=Math.floor(a+(A.width/d-512)/2),n=Math.floor(l+(A.height/d-512)/2),i=Math.floor(-r/16),c=Math.floor(-n/16),s=Math.ceil((-r+A.width/d)/16),g=Math.ceil((-n+A.height/d)/16),w=c;w<g;w++)for(var m=i;m<s;m++){if(0==(C=B(m,w)).land)t.drawImage(f,40,0,8,8,16*m+r+0,16*w+n+0,8,8),t.drawImage(f,40,0,8,8,16*m+r+8,16*w+n+0,8,8),t.drawImage(f,40,0,8,8,16*m+r+0,16*w+n+8,8,8),t.drawImage(f,40,0,8,8,16*m+r+8,16*w+n+8,8,8);else for(var u=0;u<4;u++){var v=u%2*2-1,p=B(m,w+(P=2*(u>>1)-1)).land!==C.land,D=B(m+v,w).land!==C.land,k=B(m+v,w+P).land!==C.land,y=1,b=1+3*(C.land-1);p&&(b+=P),D&&(y+=v),p||D||!k||(y+=3-u%2,b-=u>>1),t.drawImage(f,8*y,8*b,8,8,16*m+r+u%2*8,16*w+n+8*(u>>1),8,8)}C.owned&&t.drawImage(f,0,48,16,16,16*m+r,16*w+n,16,16)}for(w=c;w<g;w++)for(m=i;m<s;m++){var C;if(1==(C=B(m,w)).visible)t.drawImage(f,240,16,8,8,16*m+r+0,16*w+n+0,8,8),t.drawImage(f,240,16,8,8,16*m+r+8,16*w+n+0,8,8),t.drawImage(f,240,16,8,8,16*m+r+0,16*w+n+8,8,8),t.drawImage(f,240,16,8,8,16*m+r+8,16*w+n+8,8,8);else for(u=0;u<4;u++){var P;v=u%2*2-1,p=B(m,w+(P=2*(u>>1)-1)).visible!==C.visible,D=B(m+v,w).visible!==C.visible,k=B(m+v,w+P).visible!==C.visible,y=28,b=1;3==C.visible&&(b+=3),p&&(b+=P),D&&(y+=v),p||D||!k||(y+=3-u%2,b-=u>>1),t.drawImage(f,8*y,8*b,8,8,16*m+r+u%2*8,16*w+n+8*(u>>1),8,8)}}X("GOLD: 500",4,4),X("FOOD: 0/100",4,14),function(){const A=document.querySelector("#map").getContext("2d");A.beginPath(),A.fillStyle="rgba(255, 255, 255, 0.3)",A.fillRect(0,30,24,24*h.length+6),A.stroke()}();for(u=0;u<h.length;u++)X(h[u].name,6,34+24*u,3),L(h[u].imageX,h[u].imageY,4,38+24*u)}function B(A,e){return A<0||e<0||A>=32||e>=32?m[0]:m[A+32*e]}var C="ABCDEFGHIJKLMNOPQRSTUVWXYZ      0123456789.,!?'\":;()+-=*/\\%     ";function X(A,e,o,t=8){A=A.toUpperCase();const r=document.querySelector("#map").getContext("2d");for(var n=0;n<A.length;n++){var i=C.indexOf(A.charAt(n)),a=0+i%32,l=29+(i>>5);r.drawImage(f,8*a,8*l,8,8,e+n*t,o,t,t)}}function L(A,e,o,t){const r=document.querySelector("#map").getContext("2d");r.beginPath(),r.strokeStyle="yellow",r.rect(o,t,16,16),r.stroke(),r.drawImage(f,8*A,8*e,16,16,o,t,16,16)}

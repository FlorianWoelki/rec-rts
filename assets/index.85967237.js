var A=Object.defineProperty,e=("undefined"!=typeof require&&require,(e,o,t)=>(((e,o,t)=>{o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t})(e,"symbol"!=typeof o?o+"":o,t),t));!function(){const A=document.createElement("link").relList;if(!(A&&A.supports&&A.supports("modulepreload"))){for(const A of document.querySelectorAll('link[rel="modulepreload"]'))e(A);new MutationObserver((A=>{for(const o of A)if("childList"===o.type)for(const A of o.addedNodes)"LINK"===A.tagName&&"modulepreload"===A.rel&&e(A)})).observe(document,{childList:!0,subtree:!0})}function e(A){if(A.ep)return;A.ep=!0;const e=function(A){const e={};return A.integrity&&(e.integrity=A.integrity),A.referrerpolicy&&(e.referrerPolicy=A.referrerpolicy),"use-credentials"===A.crossorigin?e.credentials="include":"anonymous"===A.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(A);fetch(A.href,e)}}();let o=!1;window.onload=()=>{o=!0,h()},window.onresize=h;let t=!1,r=!1,n=0,i=0,a=0,l=0;var c,d,s=3,f=(c="data:image/png;base64,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",d=new Image,g++,d.onload=function(){0==--g&&h()},d.src=c,d),g=0;const w=new class{constructor(){e(this,"scrollSpeed",3),e(this,"keys",[]),window.onkeydown=A=>{this.keys[A.keyCode]=!0},window.onkeyup=A=>{this.keys[A.keyCode]=!1}}update(A){this.keys[87]&&(scrollY+=this.scrollSpeed,A()),this.keys[65]&&(scrollX+=this.scrollSpeed,A()),this.keys[83]&&(scrollY-=this.scrollSpeed,A()),this.keys[68]&&(scrollX-=this.scrollSpeed,A())}};var u=new Array(6);for(let H=0;H<u.length;H++)u[H]={name:"Base",imageX:0,imageY:6};var m=new Array(1024);for(let H=0;H<32;H++)for(let A=0;A<32;A++)m[A+32*H]={color:16711935,visible:!1,owned:!1,land:2-Math.floor(Math.random()*Math.random()*3)};function h(){if(!o||g>0)return;const A=document.querySelector("#map");A.width=window.innerWidth,A.height=window.innerHeight,A.onmousedown=function(A){A.preventDefault(),t=!0,r=!1,n=A.clientX,i=A.clientY},A.onclick=function(A){if(t=!1,!r){const t=document.querySelector("#map");var e=Math.floor(a+(t.width/s-512)/2),o=Math.floor(l+(t.height/s-512)/2);y(Math.floor((A.clientX/s-e)/16),Math.floor((A.clientY/s-o)/16))}};var e=Math.floor(a+(A.width/s-512)/2),c=Math.floor(l+(A.height/s-512)/2);y(Math.floor((800/s-e)/16),Math.floor((600/s-c)/16)),window.onmousemove=function(A){if(t){A.preventDefault();var e=A.clientX-n,o=A.clientY-i;(r||e*e+o*o>64)&&(r=!0,a+=e/s,l+=o/s,n=A.clientX,i=A.clientY,B())}},p(),B()}let v=0,b=0;function y(A,e){if(A>0&&e>0&&A<32&&e<32){var o=C(A,e);o.owned=!o.owned,function(){for(var A=0;A<32;A++)for(var e=0;e<32;e++)m[e+32*A].visible&=1;for(A=0;A<32;A++)for(e=0;e<32;e++)m[e+32*A].owned&&D(e,A,4)}()}v=A,b=e,console.log(v,b),B()}function D(A,e,o){for(var t=e-o;t<=e+o;t++)if(!(t<0||t>=32))for(var r=A-o;r<=A+o;r++)if(!(r<0||r>=32)){var n=r-A,i=t-e;if(n*n+i*i<=o*o+2){if(0===t||0===r||31===r||31===t)continue;m[r+32*t].visible=3}}}const p=()=>{requestAnimationFrame(p),w.update(B)};function B(){const A=document.querySelector("#map");s=Math.max(Math.floor(A.height/300+1),Math.floor(A.width/(16/9*300)+1));var e=Math.max(0,576-A.width/s)/2,o=Math.max(0,576-A.height/s)/2;a<-e&&(a=-e),l<-o&&(l=-o),a>e&&(a=e),l>o&&(l=o);const t=A.getContext("2d");t.imageSmoothingEnabled=!1,t.setTransform(s,0,0,s,0,0);for(var r=Math.floor(a+(A.width/s-512)/2),n=Math.floor(l+(A.height/s-512)/2),i=Math.floor(-r/16),c=Math.floor(-n/16),d=Math.ceil((-r+A.width/s)/16),g=Math.ceil((-n+A.height/s)/16),w=c;w<g;w++)for(var m=i;m<d;m++){if(0==(M=C(m,w)).land)t.drawImage(f,40,0,8,8,16*m+r+0,16*w+n+0,8,8),t.drawImage(f,40,0,8,8,16*m+r+8,16*w+n+0,8,8),t.drawImage(f,40,0,8,8,16*m+r+0,16*w+n+8,8,8),t.drawImage(f,40,0,8,8,16*m+r+8,16*w+n+8,8,8);else for(var h=0;h<4;h++){var v=h%2*2-1,b=C(m,w+(H=2*(h>>1)-1)).land!==M.land,y=C(m+v,w).land!==M.land,D=C(m+v,w+H).land!==M.land,p=1,B=1+3*(M.land-1);b&&(B+=H),y&&(p+=v),b||y||!D||(p+=3-h%2,B-=h>>1),t.drawImage(f,8*p,8*B,8,8,16*m+r+h%2*8,16*w+n+8*(h>>1),8,8)}M.owned&&t.drawImage(f,0,48,16,16,16*m+r,16*w+n,16,16)}for(w=c;w<g;w++)for(m=i;m<d;m++){var M;if(1===(M=C(m,w)).visible)t.drawImage(f,240,16,8,8,16*m+r+0,16*w+n+0,8,8),t.drawImage(f,240,16,8,8,16*m+r+8,16*w+n+0,8,8),t.drawImage(f,240,16,8,8,16*m+r+0,16*w+n+8,8,8),t.drawImage(f,240,16,8,8,16*m+r+8,16*w+n+8,8,8);else for(h=0;h<4;h++){var H;v=h%2*2-1,b=C(m,w+(H=2*(h>>1)-1)).visible!==M.visible,y=C(m+v,w).visible!==M.visible,D=C(m+v,w+H).visible!==M.visible,p=25,B=1;3==M.visible&&(B+=3),b&&(B+=H),y&&(p+=v),t.drawImage(f,8*p,8*B,8,8,16*m+r+h%2*8,16*w+n+8*(h>>1),8,8)}}X("GOLD: 500",4,4),X("FOOD: 0/100",4,14),function(){const A=document.querySelector("#map").getContext("2d");A.beginPath(),A.fillStyle="rgba(255, 255, 255, 0.3)",A.fillRect(0,30,24,24*u.length+6),A.stroke()}();for(h=0;h<u.length;h++)X(u[h].name,6,34+24*h,3),S(u[h].imageX,u[h].imageY,4,38+24*h)}function C(A,e){return A<0||e<0||A>=32||e>=32?m[0]:m[A+32*e]}var M="ABCDEFGHIJKLMNOPQRSTUVWXYZ      0123456789.,!?'\":;()+-=*/\\%     ";function X(A,e,o,t=8){A=A.toUpperCase();const r=document.querySelector("#map").getContext("2d");for(var n=0;n<A.length;n++){var i=M.indexOf(A.charAt(n)),a=0+i%32,l=29+(i>>5);r.drawImage(f,8*a,8*l,8,8,e+n*t,o,t,t)}}function S(A,e,o,t){const r=document.querySelector("#map").getContext("2d");r.beginPath(),r.strokeStyle="yellow",r.rect(o,t,16,16),r.stroke(),r.drawImage(f,8*A,8*e,16,16,o,t,16,16)}

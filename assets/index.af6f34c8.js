var A=Object.defineProperty,e=("undefined"!=typeof require&&require,(e,o,r)=>(((e,o,r)=>{o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[o]=r})(e,"symbol"!=typeof o?o+"":o,r),r));!function(){const A=document.createElement("link").relList;if(!(A&&A.supports&&A.supports("modulepreload"))){for(const A of document.querySelectorAll('link[rel="modulepreload"]'))e(A);new MutationObserver((A=>{for(const o of A)if("childList"===o.type)for(const A of o.addedNodes)"LINK"===A.tagName&&"modulepreload"===A.rel&&e(A)})).observe(document,{childList:!0,subtree:!0})}function e(A){if(A.ep)return;A.ep=!0;const e=function(A){const e={};return A.integrity&&(e.integrity=A.integrity),A.referrerpolicy&&(e.referrerPolicy=A.referrerpolicy),"use-credentials"===A.crossorigin?e.credentials="include":"anonymous"===A.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(A);fetch(A.href,e)}}();let o=!1;window.onload=()=>{o=!0,M()},window.onresize=M;let r=!1,t=!1,i=0,n=0,a=0,l=0;var f,d,s=3,c=(f="data:image/png;base64,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",d=new Image,g++,d.onload=function(){0==--g&&M()},d.src=f,d),g=0;const h=document.querySelector("#map"),w=h.getContext("2d"),m=new class{constructor(){e(this,"scrollSpeed",3),e(this,"keys",[]),window.onkeydown=A=>{this.keys[A.keyCode]=!0},window.onkeyup=A=>{this.keys[A.keyCode]=!1}}update(A){this.keys[87]&&(scrollY+=this.scrollSpeed,A()),this.keys[65]&&(scrollX+=this.scrollSpeed,A()),this.keys[83]&&(scrollY-=this.scrollSpeed,A()),this.keys[68]&&(scrollX-=this.scrollSpeed,A())}};var u=new Array(6);for(let N=0;N<u.length;N++)u[N]={name:"Base",imageX:0,imageY:6};var v=new Array(1024);for(let N=0;N<32;N++)for(let A=0;A<32;A++)v[A+32*N]={color:16711935,visible:!1,owned:!1,land:2-Math.floor(Math.random()*Math.random()*3)};async function M(){if(o&&!(g>0)){h.width=window.innerWidth,h.height=window.innerHeight,h.onmousedown=function(A){A.preventDefault(),r=!0,t=!1,i=A.clientX,n=A.clientY},h.onclick=function(A){if(r=!1,!t){var e=Math.floor(a+(h.width/s-512)/2),o=Math.floor(l+(h.height/s-512)/2);D(Math.floor((A.clientX/s-e)/16),Math.floor((A.clientY/s-o)/16))}};var A=Math.floor(a+(h.width/s-512)/2),e=Math.floor(l+(h.height/s-512)/2);D(Math.floor((800/s-A)/16),Math.floor((600/s-e)/16)),window.onmousemove=function(A){if(r){A.preventDefault();var e=A.clientX-i,o=A.clientY-n;(t||e*e+o*o>64)&&(t=!0,a+=e/s,l+=o/s,i=A.clientX,n=A.clientY,requestAnimationFrame(y))}},X()}}let B=0,I=0;function D(A,e){if(A>0&&e>0&&A<32&&e<32){var o=H(A,e);o.owned=!o.owned,function(){for(var A=0;A<32;A++)for(var e=0;e<32;e++)v[e+32*A].visible&=1;for(A=0;A<32;A++)for(e=0;e<32;e++)v[e+32*A].owned&&p(e,A,4)}()}B=A,I=e,console.log(B,I),requestAnimationFrame(y)}function p(A,e,o){for(var r=e-o;r<=e+o;r++)if(!(r<0||r>=32))for(var t=A-o;t<=A+o;t++)if(!(t<0||t>=32)){var i=t-A,n=r-e;if(i*i+n*n<=o*o+2){if(0===r||0===t||31===t||31===r)continue;v[t+32*r].visible=3}}}const X=()=>{requestAnimationFrame(X),m.update(y)};function y(){s=Math.max(Math.floor(h.height/300+1),Math.floor(h.width/(16/9*300)+1));var A=Math.max(0,576-h.width/s)/2,e=Math.max(0,576-h.height/s)/2;a<-A&&(a=-A),l<-e&&(l=-e),a>A&&(a=A),l>e&&(l=e),w.imageSmoothingEnabled=!1,w.setTransform(s,0,0,s,0,0);for(var o=Math.floor(a+(h.width/s-512)/2),r=Math.floor(l+(h.height/s-512)/2),t=Math.floor(-o/16),i=Math.floor(-r/16),n=Math.ceil((-o+h.width/s)/16),f=Math.ceil((-r+h.height/s)/16),d=i;d<f;d++)for(var g=t;g<n;g++){if(0==(X=H(g,d)).land)w.drawImage(c,40,0,8,8,16*g+o+0,16*d+r+0,8,8),w.drawImage(c,40,0,8,8,16*g+o+8,16*d+r+0,8,8),w.drawImage(c,40,0,8,8,16*g+o+0,16*d+r+8,8,8),w.drawImage(c,40,0,8,8,16*g+o+8,16*d+r+8,8,8);else for(var m=0;m<4;m++){var v=m%2*2-1,M=H(g,d+(y=2*(m>>1)-1)).land!==X.land,B=H(g+v,d).land!==X.land,I=H(g+v,d+y).land!==X.land,D=1,p=1+3*(X.land-1);M&&(p+=y),B&&(D+=v),M||B||!I||(D+=3-m%2,p-=m>>1),w.drawImage(c,8*D,8*p,8,8,16*g+o+m%2*8,16*d+r+8*(m>>1),8,8)}X.owned&&w.drawImage(c,0,48,16,16,16*g+o,16*d+r,16,16)}for(d=i;d<f;d++)for(g=t;g<n;g++){var X;if(1===(X=H(g,d)).visible)w.drawImage(c,240,16,8,8,16*g+o+0,16*d+r+0,8,8),w.drawImage(c,240,16,8,8,16*g+o+8,16*d+r+0,8,8),w.drawImage(c,240,16,8,8,16*g+o+0,16*d+r+8,8,8),w.drawImage(c,240,16,8,8,16*g+o+8,16*d+r+8,8,8);else for(m=0;m<4;m++){var y;v=m%2*2-1,M=H(g,d+(y=2*(m>>1)-1)).visible!==X.visible,B=H(g+v,d).visible!==X.visible,I=H(g+v,d+y).visible!==X.visible,D=25,p=1;3==X.visible&&(p+=3),M&&(p+=y),B&&(D+=v),w.drawImage(c,8*D,8*p,8,8,16*g+o+m%2*8,16*d+r+8*(m>>1),8,8)}}C("GOLD: 500",4,4),C("FOOD: 0/100",4,14),w.beginPath(),w.fillStyle="rgba(255, 255, 255, 0.3)",w.fillRect(0,30,24,24*u.length+6),w.stroke();for(m=0;m<u.length;m++)C(u[m].name,6,34+24*m,3),U(u[m].imageX,u[m].imageY,4,38+24*m)}function H(A,e){return A<0||e<0||A>=32||e>=32?v[0]:v[A+32*e]}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZ      0123456789.,!?'\":;()+-=*/\\%     ";function C(A,e,o,r=8){A=A.toUpperCase();for(var t=0;t<A.length;t++){var i=b.indexOf(A.charAt(t)),n=0+i%32,a=29+(i>>5);w.drawImage(c,8*n,8*a,8,8,e+t*r,o,r,r)}}function U(A,e,o,r){w.beginPath(),w.strokeStyle="yellow",w.rect(o,r,16,16),w.stroke(),w.drawImage(c,8*A,8*e,16,16,o,r,16,16)}
